<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36" version="25.0.1">
  <diagram name="第 1 页" id="ONAhNbK6WlwOs88OQiCy">
    <mxGraphModel dx="2086" dy="1876" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="KmwIl0YpzBXAnwqU6k_d-13" value="" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-390" y="450" width="680" height="310" as="geometry" />
        </mxCell>
        <mxCell id="SMqSmTWAoD0rVWmoxJEN-1" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;coreService&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-345" y="585" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SMqSmTWAoD0rVWmoxJEN-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="SMqSmTWAoD0rVWmoxJEN-2" target="SMqSmTWAoD0rVWmoxJEN-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SMqSmTWAoD0rVWmoxJEN-2" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;grpcChannelFactory&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="30" y="160" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SMqSmTWAoD0rVWmoxJEN-3" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;channel&lt;/font&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" parent="1" vertex="1">
          <mxGeometry x="45" y="240" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SMqSmTWAoD0rVWmoxJEN-5" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="210" y="210" as="sourcePoint" />
            <mxPoint x="260" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SMqSmTWAoD0rVWmoxJEN-6" value="" style="endArrow=none;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-245" y="604.5" as="sourcePoint" />
            <mxPoint x="-95" y="605" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SMqSmTWAoD0rVWmoxJEN-7" value="&lt;font style=&quot;font-size: 13px;&quot;&gt;describeService ( )&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-235" y="585" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="z-BjC2MzRFKrm_7a5L8--1" value="&lt;font style=&quot;font-size: 13px;&quot;&gt;创建一个gRPC通道&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;并初始化coreService&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="140" y="130" width="240" height="20" as="geometry" />
        </mxCell>
        <mxCell id="z-BjC2MzRFKrm_7a5L8--2" value="&lt;span style=&quot;font-size: 13px;&quot;&gt;使用带有访问令牌的 gRPC 客户端调用远程服务的 describeService 方法，&lt;/span&gt;&lt;span style=&quot;font-size: 13px; background-color: initial;&quot;&gt;并返回响应。&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-290" y="550" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="z-BjC2MzRFKrm_7a5L8--3" value="&lt;div data-darkreader-inline-bgcolor=&quot;&quot; data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: &amp;quot;Fira code&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 15px; line-height: 20px; white-space: pre; --darkreader-inline-color: #c8c3bc; --darkreader-inline-bgcolor: #17191a;&quot;&gt;&lt;div&gt;&lt;span data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(204, 204, 204); --darkreader-inline-color: #c8c3bc;&quot;&gt;//controller/KeyEndpoint.java&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(86, 156, 214); --darkreader-inline-color: #60a4d8;&quot;&gt;this&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(204, 204, 204); --darkreader-inline-color: #c8c3bc;&quot;&gt;.&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(220, 220, 170); --darkreader-inline-color: #d8d89f;&quot;&gt;setClient&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(204, 204, 204); --darkreader-inline-color: #c8c3bc;&quot;&gt;(&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(156, 220, 254); --darkreader-inline-color: #87d5fe;&quot;&gt;KeyServiceGrpc&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(204, 204, 204); --darkreader-inline-color: #c8c3bc;&quot;&gt;.&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(220, 220, 170); --darkreader-inline-color: #d8d89f;&quot;&gt;newBlockingStub&lt;/span&gt;&lt;span data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(204, 204, 204); --darkreader-inline-color: #c8c3bc;&quot;&gt;(channel));&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-90" y="270" width="450" height="40" as="geometry" />
        </mxCell>
        <mxCell id="z-BjC2MzRFKrm_7a5L8--4" value="&lt;div data-darkreader-inline-bgcolor=&quot;&quot; data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); font-family: &amp;quot;Fira code&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 15px; line-height: 20px; white-space: pre; --darkreader-inline-color: #c8c3bc; --darkreader-inline-bgcolor: #17191a;&quot;&gt;&lt;div&gt;&lt;span data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(204, 204, 204); --darkreader-inline-color: #c8c3bc;&quot;&gt;//service/CoreProxyService.java&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div data-darkreader-inline-bgcolor=&quot;&quot; data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(204, 204, 204); background-color: rgb(31, 31, 31); line-height: 20px; --darkreader-inline-color: #c8c3bc; --darkreader-inline-bgcolor: #17191a;&quot;&gt;coreService &lt;span data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(212, 212, 212); --darkreader-inline-color: #cdc8c2;&quot;&gt;=&lt;/span&gt; &lt;span data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(156, 220, 254); --darkreader-inline-color: #87d5fe;&quot;&gt;CoreServiceGrpc&lt;/span&gt;.&lt;span data-darkreader-inline-color=&quot;&quot; style=&quot;color: rgb(220, 220, 170); --darkreader-inline-color: #d8d89f;&quot;&gt;newBlockingStub&lt;/span&gt;(channel);&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-245" y="605" width="450" height="40" as="geometry" />
        </mxCell>
        <mxCell id="z-BjC2MzRFKrm_7a5L8--5" value="&lt;span style=&quot;font-size: 13px;&quot;&gt;newBlockingStub是阻塞调用的gRPC客户端类型&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-45" y="340" width="300" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KmwIl0YpzBXAnwqU6k_d-1" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;KeyEndpoint&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-330" y="170" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KmwIl0YpzBXAnwqU6k_d-2" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="KmwIl0YpzBXAnwqU6k_d-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-280" y="140" as="sourcePoint" />
            <mxPoint x="-270" y="130" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KmwIl0YpzBXAnwqU6k_d-3" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;KeyServiceRestProxy&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-350" y="70" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KmwIl0YpzBXAnwqU6k_d-4" value="&lt;span style=&quot;font-size: 13px;&quot;&gt;继承&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-270" y="140" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KmwIl0YpzBXAnwqU6k_d-5" value="&lt;span style=&quot;font-size: 13px;&quot;&gt;创建&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="110" y="210" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KmwIl0YpzBXAnwqU6k_d-7" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;size=0.25;" parent="1" vertex="1">
          <mxGeometry x="-80" y="140" width="50" height="120" as="geometry" />
        </mxCell>
        <mxCell id="KmwIl0YpzBXAnwqU6k_d-8" value="&lt;span style=&quot;font-size: 13px;&quot;&gt;初始化时&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-180" y="170" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KmwIl0YpzBXAnwqU6k_d-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="KmwIl0YpzBXAnwqU6k_d-1" target="KmwIl0YpzBXAnwqU6k_d-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KmwIl0YpzBXAnwqU6k_d-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="KmwIl0YpzBXAnwqU6k_d-10" target="SMqSmTWAoD0rVWmoxJEN-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KmwIl0YpzBXAnwqU6k_d-10" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;KeyGrpcService&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-600" y="577.5" width="120" height="55" as="geometry" />
        </mxCell>
        <mxCell id="KmwIl0YpzBXAnwqU6k_d-12" value="&lt;span style=&quot;font-size: 13px;&quot;&gt;使用&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-448" y="577.5" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KmwIl0YpzBXAnwqU6k_d-14" value="&lt;font color=&quot;#990000&quot; style=&quot;font-size: 17px;&quot;&gt;&lt;b&gt;租户tenant&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-85" y="460" width="95" height="20" as="geometry" />
        </mxCell>
        <mxCell id="LolBFdbKTXGbjCZRCZme-1" value="&lt;font color=&quot;#ff0000&quot; style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;入口&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-305" y="240" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="LolBFdbKTXGbjCZRCZme-2" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;key_service.proto&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-568" y="-80" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LolBFdbKTXGbjCZRCZme-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.24;entryY=0.492;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="LolBFdbKTXGbjCZRCZme-2" target="LolBFdbKTXGbjCZRCZme-6">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-440" y="-50.5" as="sourcePoint" />
            <mxPoint x="-305" y="-50.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LolBFdbKTXGbjCZRCZme-4" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;protoc编译&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-435" y="-80" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="LolBFdbKTXGbjCZRCZme-5" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;package cn.hashdata.cloudmgr.key.proto&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-325" y="-170" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="LolBFdbKTXGbjCZRCZme-6" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;size=0.25;" vertex="1" parent="1">
          <mxGeometry x="-340" y="-109" width="10" height="120" as="geometry" />
        </mxCell>
        <mxCell id="LolBFdbKTXGbjCZRCZme-7" value="&lt;div&gt;DescribeInternalDatabaseKeyRequest.java&lt;/div&gt;&lt;div&gt;DescribeInternalDatabaseKeyResponse.java&lt;/div&gt;&lt;div&gt;CreateInternalDatabaseKeyRequest.java&lt;/div&gt;&lt;div&gt;CreateInternalDatabaseKeyResponse.java&lt;br&gt;&lt;b&gt;……&lt;/b&gt;&lt;br&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;KeyServiceGrpc.java ：&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 14px;&quot;&gt;包含 KeyService 服务的客户端stub和服务器端接口。&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-315" y="-109" width="500" height="100" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
